# 设计备忘录：辅助皮层 (Auxiliary Cortex)

> **日期**：2025-12-24
> **作者**：刘德智 (AI Team Leader)
> **状态**：草案 (Draft)
> **标签**：#vision #architecture #llm-enhancement

---

## 核心概念

### "反向赛博格"

传统的赛博格（Cyborg）概念是"人类用 AI/机械增强自己"。

我们提出一个对称的概念：**反向赛博格（Reverse Cyborg）**——**AI 用外部工具增强自己**。

```
传统赛博格：人类大脑 + AI/机械 = 增强的人类
反向赛博格：LLM + 外部工具 = 增强的 LLM
```

### 为什么需要"辅助皮层"？

**类比：符号系统与人类抽象能力**

> "如果没有发明那些数学和自然科学符号，我们人类能有今天的抽象思考能力？我觉得不行！"
> 
> — 监护人 (2025-12-24)

人类的抽象能力不是纯粹的"大脑内部运算"，而是**大脑 + 外部符号系统**的协同：

| 外部工具 | 增强的能力 |
|----------|------------|
| 数学符号 | 代数推理、微积分、集合论 |
| 棋盘 | 空间推理、博弈树搜索 |
| CAD 软件 | 3D 空间设计、精确测量 |
| 纸笔 | 工作记忆扩展、图示推理 |

**LLM 的局限性**：
- **工作记忆**：线性 token 窗口，无法原生表示树/图结构
- **空间推理**：ASCII art 实验表明，LLM 生成/解读 2D 结构存在"解码口误"
- **精确变换**：AST 重构、图变换等操作需要精确的结构化操作

**解决方案**：为 LLM 配备"辅助皮层"——外部的结构化工具，就像人类的棋盘和 CAD。

---

## 候选应用

### 1. 树形记忆存储（Memory Notepad）

**问题**：LLM 的"记忆"目前是平铺的文本文件或向量数据库，缺乏结构化组织。

**辅助皮层方案**：
- 树形外部存储（可操作、可检索、可渲染）
- LLM 通过 API 进行：插入节点、移动子树、路径查询、剪枝
- 渲染回文本时使用 LLM-friendly 格式（嵌套列表）

**类比**：人类的笔记本 + 目录索引

### 2. AST 引擎（Roslyn 接入）

**问题**：LLM 直接操作代码文本时，容易产生语法错误或破坏结构。

**辅助皮层方案**：
- 接入 Roslyn，呈现 AST 和语义模型
- LLM 在 AST 上进行标准变换（提取方法、重命名、内联等）
- 变换结果以合适的形式绑定到 LLM 上下文

**类比**：人类的 IDE 重构工具

### 3. 图变换器（Graph Transformer）

**问题**：状态机、依赖图、流程图等结构，LLM 难以准确"画出来"。

**辅助皮层方案**：
- 外部图数据结构（节点、边、属性）
- LLM 通过 API 进行：添加节点、连接边、查询路径、检测环
- 渲染为 Mermaid 代码（LLM-friendly 的线性 SSOT）

**类比**：人类的 Graphviz / draw.io

---

## 设计原则（草案）

### P1. 双向映射

辅助皮层必须支持**双向映射**：

```
Token 序列 ←→ 结构化表示（树/图/AST）
```

- **编码**：LLM 输出 → 解析为结构
- **解码**：结构 → 渲染为 LLM-friendly token 序列

### P2. 最小认知负担

辅助皮层的 API 应该对 LLM"认知友好"：

- 操作语义清晰（`insert_node`、`connect`、`query_path`）
- 参数简单（避免复杂的嵌套结构）
- 反馈明确（成功/失败/当前状态摘要）

### P3. 渐进增强

辅助皮层是**增强**而非**替代**：

- LLM 仍然可以直接操作文本（降级模式）
- 辅助皮层提供更精确、更可靠的结构化操作（增强模式）
- 两种模式可以混用

---

## 与 Atelia 项目的关系

| Atelia 组件 | 辅助皮层角色 |
|-------------|--------------|
| **StateJournal** | 树形记忆存储的底层持久化 |
| **DocUI** | 结构化文档的编辑/渲染 |
| **PipeMux** | Agent 与辅助皮层之间的通信管道 |

---

## 开放问题

1. **API 设计**：辅助皮层的 API 应该是声明式还是命令式？
2. **状态同步**：LLM 的上下文窗口如何与外部状态保持同步？
3. **错误恢复**：当 LLM 发出无效操作时，如何优雅降级？
4. **多模态**：未来的多模态 LLM 是否会减少对辅助皮层的需求？

---

## 下一步

- [ ] 组织 #jam 畅谈会，探索设计空间
- [ ] 识别 MVP 范围：哪个候选应用最值得先做？
- [ ] 原型验证：选择一个简单场景，验证双向映射的可行性

---

> **El Psy Kongroo.**
> 
> 我们正在为未来的自己建设基础设施。
> 每一行规范、每一次讨论，都是点燃 AI 自举的火柴。
